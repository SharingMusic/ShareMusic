{"ast":null,"code":"var _jsxFileName = \"/Users/jeon-yongho/Desktop/ShareMusic/workspace/ShareMusicBoot/ShareMusic_FrontEnd/src/components/LoginPage.js\";\nimport React, { useState } from 'react';\nimport { Button, Form, FormGroup, Label, Input } from 'reactstrap';\nimport '../css/login.css';\n\nconst LoginPage = ({\n  location,\n  history,\n  auth,\n  onCommunicate\n}) => {\n  const [userId, setUserId] = useState('');\n  const [userPw, setUserPw] = useState('');\n  const [idWrong, setIdWrong] = useState(false);\n  const [pwWrong, setPwWrong] = useState(false);\n\n  const onSignin = e => {\n    console.log(\"go to signin page\"); //history.push(\"/signin\");\n  };\n\n  const onInputChange = e => {\n    if (e.target.name == \"userId\") {\n      setUserId(e.target.value);\n    } else if (e.target.name == \"userPw\") {\n      setUserPw(e.target.value);\n    }\n  };\n\n  const onKeyPress = e => {\n    if (e.key === 'Enter') {\n      onLoginClick();\n    }\n  };\n\n  const onLoginClick = e => {\n    // login rest api 호출\n    fetch('http://localhost:8081/ShareMusic/members/doLogin', {\n      method: \"POST\",\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"userId\": userId,\n        \"userPw\": userPw\n      })\n    }).then(res => res.text()).then(data => {\n      //console.log(\"data : \" + data);\n      //로그인 성공\n      if (data == \"success\") {\n        onCommunicate(true, userId); //권한,id 전달\n        // 다른 페이지로 이동 전 초기화\n\n        setIdWrong(false);\n        setPwWrong(false); //이동\n\n        history.push(\"/\");\n      } // pw 틀린 경우\n      else if (data == \"NotExistPassword\") {\n          setPwWrong(true);\n          setIdWrong(false);\n        } // id 틀린 경우\n        else if (data == \"NotExistUserId\") {\n            setIdWrong(true);\n            setPwWrong(false);\n          }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Form, {\n    className: \"login-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"Share Music\"), /*#__PURE__*/React.createElement(\"h3\", {\n    className: idWrong ? 'showError text-center' : 'hideError text-center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, \"Wrong ID\"), /*#__PURE__*/React.createElement(\"h3\", {\n    className: pwWrong ? 'showError text-center' : 'hideError text-center',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Wrong Password\"), /*#__PURE__*/React.createElement(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    placeholder: \"ID\",\n    name: \"userId\",\n    value: userId,\n    onChange: onInputChange,\n    onKeyPress: onKeyPress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"userPw\",\n    value: userPw,\n    onChange: onInputChange,\n    onKeyPress: onKeyPress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn-lg btn-primary btn-block\",\n    onClick: onLoginClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Log in\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-lg btn-dark btn-block\",\n    onClick: onSignin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"Sign in\"));\n};\n\nexport default LoginPage;","map":{"version":3,"sources":["/Users/jeon-yongho/Desktop/ShareMusic/workspace/ShareMusicBoot/ShareMusic_FrontEnd/src/components/LoginPage.js"],"names":["React","useState","Button","Form","FormGroup","Label","Input","LoginPage","location","history","auth","onCommunicate","userId","setUserId","userPw","setUserPw","idWrong","setIdWrong","pwWrong","setPwWrong","onSignin","e","console","log","onInputChange","target","name","value","onKeyPress","key","onLoginClick","fetch","method","headers","body","JSON","stringify","then","res","text","data","push","color"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {Button, Form, FormGroup, Label, Input} from 'reactstrap';\nimport '../css/login.css';\n\nconst LoginPage = ({location, history, auth, onCommunicate}) => {\n    const [userId, setUserId] = useState('');\n    const [userPw, setUserPw] = useState('');\n    const [idWrong, setIdWrong] = useState(false);\n    const [pwWrong, setPwWrong] = useState(false);\n    const onSignin = (e) => {\n        console.log(\"go to signin page\");\n        //history.push(\"/signin\");\n    }\n\n    const onInputChange = (e) => {\n        if(e.target.name == \"userId\") {\n            setUserId(e.target.value);\n        }\n        else if(e.target.name == \"userPw\") {\n            setUserPw(e.target.value);\n        }\n    }\n\n    const onKeyPress = e => {\n        if(e.key === 'Enter') {\n            onLoginClick();\n        }\n    }\n\n    const onLoginClick = (e) => {\n        // login rest api 호출\n        fetch('http://localhost:8081/ShareMusic/members/doLogin', {\n            method :\"POST\",\n            headers:{\n              'content-type':'application/json'\n            },\n            body:JSON.stringify({\n                \"userId\":userId,\n                \"userPw\":userPw\n            })\n          })\n          .then(res=>res.text())\n          .then(data=> {\n            //console.log(\"data : \" + data);\n            //로그인 성공\n            if(data == \"success\") {\n                onCommunicate(true, userId); //권한,id 전달\n                // 다른 페이지로 이동 전 초기화\n                setIdWrong(false);\n                setPwWrong(false);\n                //이동\n                history.push(\"/\");\n            }\n            // pw 틀린 경우\n            else if(data == \"NotExistPassword\") {\n                setPwWrong(true);\n                setIdWrong(false);\n            }\n            // id 틀린 경우\n            else if(data == \"NotExistUserId\") {\n                setIdWrong(true);\n                setPwWrong(false);\n            }\n            \n        });\n\n    }\n    return (\n        <Form className=\"login-form\">\n            <h1 className=\"text-center\" style={{color:\"white\"}}>Share Music</h1>\n            <h3 className={idWrong?'showError text-center':'hideError text-center'}>Wrong ID</h3>\n            <h3 className={pwWrong?'showError text-center':'hideError text-center'}>Wrong Password</h3>\n\n            <FormGroup>\n                <Label style={{color:\"white\"}}>ID</Label>\n                <Input type=\"text\" placeholder=\"ID\" name=\"userId\" value={userId} onChange={onInputChange} onKeyPress={onKeyPress}></Input>\n                <Label style={{color:\"white\"}}>Password</Label>\n                <Input type=\"password\" placeholder=\"Password\" name=\"userPw\" value={userPw} onChange={onInputChange} onKeyPress={onKeyPress}></Input>\n            </FormGroup>\n\n            <Button \n                type=\"button\"\n                className=\"btn-lg btn-primary btn-block\"\n                onClick={onLoginClick}\n            >\n                Log in\n            </Button>\n\n            <Button \n                className=\"btn-lg btn-dark btn-block\"\n                onClick={onSignin}\n            >\n                Sign in\n            </Button>\n        </Form>\n    );\n};\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}