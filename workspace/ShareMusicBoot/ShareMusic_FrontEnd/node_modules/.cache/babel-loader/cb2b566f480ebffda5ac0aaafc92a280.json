{"ast":null,"code":"var _jsxFileName = \"/Users/jeon-yongho/Desktop/ShareMusic/workspace/ShareMusicBoot/ShareMusic_FrontEnd/src/components/AddColl3.js\";\nimport React, { Component } from 'react';\nimport '../css/addcoll3.css';\nimport defaultImg from '../images/defaultImg.PNG';\n\nclass AddColl3 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedImg: null,\n      imgBase64: defaultImg,\n      returnData: [],\n      songsData: [],\n      a: null\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onClickOCR = this.onClickOCR.bind(this);\n    this.onClickAdd = this.onClickAdd.bind(this);\n  }\n\n  onChange(e) {\n    console.log(\"onChange 3 !\");\n    let reader = new FileReader();\n\n    reader.onloadend = () => {\n      // 읽기가 완료되면 아래코드가 실행\n      const base64 = reader.result;\n\n      if (base64) {\n        // 파일 base64 상태 업데이트\n        this.setState({\n          imgBase64: base64.toString()\n        });\n      }\n    };\n\n    if (e.target.files[0]) {\n      reader.readAsDataURL(e.target.files[0]); //파일을 읽어 버퍼에 저장\n      //파일 상태 업데이트\n\n      this.setState({\n        selectedImg: e.target.files[0]\n      });\n    }\n  }\n\n  onClickOCR() {\n    if (this.state.imgBase64 === defaultImg) {\n      alert(\"upload an image\");\n      return;\n    }\n\n    console.log(\"OCR!!\");\n    const formData = new FormData();\n    formData.append('file', this.state.selectedImg, this.state.selectedImg.name);\n    console.log(this.state.selectedImg.name);\n    fetch('http://localhost:8081/ShareMusic/ocr/', {\n      method: \"POST\",\n      body: formData\n    }).then(res => res.json()).then(data => {\n      this.setState({\n        returnData: data\n      });\n      console.log(this.state.returnData);\n      const datasList = data.map(d => /*#__PURE__*/React.createElement(\"div\", {\n        key: d.musicName,\n        id: d.musicName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inputResult\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: d.musicName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inputResult\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: d.singer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }\n      }))));\n      this.setState({\n        a: datasList\n      });\n      this.props.onCommunicate(this.state.returnData);\n    });\n  }\n\n  onClickAdd() {\n    this.props.onCommunicate(this.state.returnData);\n    this.props.onCommunicateAdd();\n  }\n\n  render() {\n    const {\n      onChange,\n      onClickOCR,\n      onClickAdd\n    } = this;\n    const {\n      selectedImg,\n      imgBase64,\n      returnData,\n      a\n    } = this.state;\n    const {\n      onCommunicate,\n      onCommunicateAdd\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"titlename\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \"Add Collection\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, \"Add Music List\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"leftView col-md-6\",\n      style: {\n        position: \"relative\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"View_area3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"preimg3\",\n      src: imgBase64,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filebox bs3-primary preview-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"input_file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }, \"Upload\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: onChange,\n      id: \"input_file\",\n      className: \"upload-hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onClickOCR,\n      type: \"button\",\n      className: \"btn btn-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }\n    }, \"OCR\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onClickAdd,\n      type: \"button\",\n      className: \"btn btn-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }\n    }, \"Add Collection\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      style: {\n        position: \"relative\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    }, a)));\n  }\n\n}\n\nexport default AddColl3;","map":{"version":3,"sources":["/Users/jeon-yongho/Desktop/ShareMusic/workspace/ShareMusicBoot/ShareMusic_FrontEnd/src/components/AddColl3.js"],"names":["React","Component","defaultImg","AddColl3","constructor","props","state","selectedImg","imgBase64","returnData","songsData","a","onChange","bind","onClickOCR","onClickAdd","e","console","log","reader","FileReader","onloadend","base64","result","setState","toString","target","files","readAsDataURL","alert","formData","FormData","append","name","fetch","method","body","then","res","json","data","datasList","map","d","musicName","singer","onCommunicate","onCommunicateAdd","render","position"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport '../css/addcoll3.css';\nimport defaultImg from '../images/defaultImg.PNG';\n\nclass AddColl3 extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedImg: null,\n            imgBase64:defaultImg,\n            returnData:[],\n            songsData:[],\n            a:null,\n        }\n        this.onChange = this.onChange.bind(this);\n        this.onClickOCR = this.onClickOCR.bind(this);\n        this.onClickAdd = this.onClickAdd.bind(this);\n    }\n\n    onChange(e) {\n        console.log(\"onChange 3 !\");\n        let reader = new FileReader();\n\n        reader.onloadend = () => {\n          // 읽기가 완료되면 아래코드가 실행\n          const base64 = reader.result;\n          if (base64) {\n            // 파일 base64 상태 업데이트\n            this.setState({\n                imgBase64:base64.toString()\n            });\n          }\n        }\n        if (e.target.files[0]) {\n            reader.readAsDataURL(e.target.files[0]); //파일을 읽어 버퍼에 저장\n            //파일 상태 업데이트\n            this.setState({\n                selectedImg:e.target.files[0]\n            }); \n        }\n    }\n    \n    onClickOCR() {\n        if(this.state.imgBase64 === defaultImg) {\n            alert(\"upload an image\");\n            return;\n        }\n        console.log(\"OCR!!\");\n\n        const formData = new FormData();\n        formData.append('file', this.state.selectedImg, this.state.selectedImg.name);\n        console.log(this.state.selectedImg.name);\n        fetch('http://localhost:8081/ShareMusic/ocr/', {\n            method :\"POST\",\n            body:formData\n        })\n        .then(res=>res.json())\n        .then(data=> { \n            this.setState({\n                returnData: data\n            });\n            console.log(this.state.returnData);\n            const datasList = data.map((d) => (\n                <div key={d.musicName} id={d.musicName}>\n                    <div className=\"inputResult\">\n                        <input type=\"text\" className=\"form-control\" value={d.musicName} ></input>\n                    </div>\n                    <div className=\"inputResult\">\n                        <input type=\"text\" className=\"form-control\" value={d.singer}></input>\n                    </div>\n                </div>\n            ));\n            this.setState({\n                a:datasList\n            })\n            this.props.onCommunicate(this.state.returnData);\n        });\n    }\n\n    onClickAdd() {\n        this.props.onCommunicate(this.state.returnData);\n        this.props.onCommunicateAdd();\n    }\n\n    render() {\n        const { onChange, onClickOCR, onClickAdd } = this;\n        const { selectedImg, imgBase64, returnData, a } = this.state;\n        const { onCommunicate, onCommunicateAdd } = this.props;\n        return (\n            <>\n            <h1 className=\"titlename\">Add Collection</h1>\n            <div className=\"info\">Add Music List</div>\n            <br/>\n            <br/>\n            <div className=\"container\">\n\n                {/* 업로드한 이미지 미리보기 */}\n                <div className=\"leftView col-md-6\" style={{position:\"relative\"}}>\n                    <div id='View_area3'> \n                        <img id=\"preimg3\" src={imgBase64}/>\n                    </div>\n\n                    <div className=\"filebox bs3-primary preview-image\">\n                        &nbsp;&nbsp;&nbsp;\n                        <label htmlFor=\"input_file\">Upload</label> \n                        <input type=\"file\" onChange={onChange}\n                                id=\"input_file\" className=\"upload-hidden\"> \n                        </input>\n                        <div className=\"button-div\">\n                            <button onClick={onClickOCR} type=\"button\" className=\"btn btn-danger\">OCR</button>\n                        </div>\n                        <div className=\"button-div\">\n                            <button onClick={onClickAdd} type=\"button\" className=\"btn btn-danger\">Add Collection</button>\n                        </div>\n                    </div>\n                </div>\n                {/* OCR 결과 출력(수정도 가능하도록 input text로) */}\n                <div className=\"col-md-6\" style={{position:\"relative\"}}>\n                   {a}\n                </div>\n            </div>\n            </>\n        );\n    }\n}\n\nexport default AddColl3;"]},"metadata":{},"sourceType":"module"}